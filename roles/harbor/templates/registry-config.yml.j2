version: 0.1
log:
  level: {{level}}
  fields:
    service: registry
storage:
  cache:
    layerinfo: redis
  {{storage_provider_info}}
  maintenance:
    uploadpurging:
{% if purge_upload.enabled %}
      enabled: true
      age: {{ purge_upload.age }}
      interval: {{ purge_upload.interval }}
      {% if purge_upload.dryrun %}
      dryrun: true
      {% else %}
      dryrun: false
      {% endif %}
{% else %}
      enabled: false
{% endif %}
  delete:
    enabled: true
{% if storage_redirect_disabled %}
  redirect:
    disable: true
{% endif %}
redis:
{% if sentinel_master_set %}
  # sentinel hosts with comma
  addr: {{redis_host}}
  sentinelMasterSet: {{sentinel_master_set}}
{% else %}
  addr: {{redis_host}}
{% endif %}
  readtimeout: 10s
  writetimeout: 10s
  dialtimeout: 10s
  password: {{redis_password}}
  db: {{redis_db_index_reg}}
  pool:
    maxidle: 100
    maxactive: 500
    idletimeout: 60s
http:
  addr: :5000
  secret: placeholder
  debug:
    addr: localhost:5001
auth:
  htpasswd:
    realm: harbor-registry-basic-realm
    path: /etc/registry/passwd
validation:
  disabled: true
compatibility:
  schema1:
    enabled: true
